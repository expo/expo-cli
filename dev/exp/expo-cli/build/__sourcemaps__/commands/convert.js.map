{"version":3,"sources":["commands/convert.js"],"names":["projectDir","options","console","error","action","warning","type","name","message","prompt","confirmed","gitWarning","gitConfirmed","questions","validate","val","length","answers","convertProjectAsync","__unused_action","program","command","alias","description","allowNonInteractive","asyncActionProjectDir"],"mappings":";;;;;;;;;;;;;;;;;;;4IAMA,iBAAsBA,UAAtB,EAAkCC,OAAlC;AAAA;AAAA;AAAA;AAAA;AACEC,oBAAQC,KAAR;AACAD,oBAAQC,KAAR;AAFF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,M;;;;;;6IAQf,kBAA+BJ,UAA/B,EAA2CC,OAA3C;AAAA;;AAAA;AAAA;AAAA;AAAA;AACMI,mBADN,GACgB,CACZ;AACEC,oBAAM,SADR;AAEEC,oBAAM,WAFR;AAGEC;AAHF,aADY,CADhB;AAAA;AAAA,mBAQ4B,wCAASC,MAAT,CAAgBJ,OAAhB,CAR5B;;AAAA;AAAA;AAQQK,qBARR,SAQQA,SARR;;AAAA,gBAUOA,SAVP;AAAA;AAAA;AAAA;;AAWI;AAXJ;;AAAA;AAiBMC,sBAjBN,GAiBmB,CACf;AACEL,oBAAM,SADR;AAEEC,oBAAM,cAFR;AAGEC;AAHF,aADe,CAjBnB;AAAA;AAAA,mBAyB+B,wCAASC,MAAT,CAAgBE,UAAhB,CAzB/B;;AAAA;AAAA;AAyBQC,wBAzBR,SAyBQA,YAzBR;;;AA2BE,gBAAI,CAACA,YAAL,EAAmB;AACjB,iDACE,mGADF;AAGD;;AA/BH,kBAiCM,CAACF,SAAD,IAAc,CAACE,YAjCrB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAqCMC,qBArCN,GAqCkB,CACd;AACEP,oBAAM,OADR;AAEEC,oBAAM,aAFR;AAGEC,uBAAS,qDAHX;AAIEM,sBAJF,oBAIWC,GAJX,EAIgB;AACZ,uBAAOA,IAAIC,MAAJ,GAAa,CAApB;AACD;AANH,aADc,EASd;AACEV,oBAAM,OADR;AAEEC,oBAAM,oBAFR;AAGEC,uBACE;AAJJ,aATc,EAed;AACEF,oBAAM,OADR;AAEEC,oBAAM,mBAFR;AAGEC,uBACE;AAJJ,aAfc,CArClB;AAAA;AAAA,mBA4DsB,wCAASC,MAAT,CAAgBI,SAAhB,CA5DtB;;AAAA;AA4DMI,mBA5DN;AAAA;AAAA,mBA6DQ,0BAAIC,mBAAJ,CAAwBlB,UAAxB,EAAoCiB,OAApC,gCA7DR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeE,e;;;;;;;AAdf;AAAA;AAAA;;;;AAEA;AAAA;AAAA;;;;AAEA;AAAA;AAAA;;;;kBA0Ee,mBAAW;AACxBC,UACGC,OADH,CACW,uBADX,EAEGC,KAFH,CAES,UAFT,EAGGC,WAHH,CAGe,uEAHf,EAIGC,mBAJH,GAKGC,qBALH,CAKyBrB,MALzB,EAKiC,IALjC,EADwB,CAMgB;AACzC,C","file":"../../commands/convert.js","sourcesContent":["import inquirer from 'inquirer';\n\nimport { Exp } from 'xdl';\n\nimport log from '../log';\n\nasync function action(projectDir, options) {\n  console.error(`'exp convert' is temporarily under maintenance and not available`);\n  console.error(\n    `The easiest way to convert a project at the moment is to create a new project with 'exp init' and copy your project files into it.`\n  );\n  return;\n}\n\nasync function __unused_action(projectDir, options) {\n  let warning = [\n    {\n      type: 'confirm',\n      name: 'confirmed',\n      message: `Warning: we are going to modify your package.json, delete your node_modules directory, and modify your .babelrc file (or create if you do not have one). Are you OK with this?\\n`,\n    },\n  ];\n  let { confirmed } = await inquirer.prompt(warning);\n\n  if (!confirmed) {\n    log(\n      `OK, aborted. You can do this process manually by creating a new project with \\`exp init\\` and copying in the files that you need.`\n    );\n    return;\n  }\n\n  let gitWarning = [\n    {\n      type: 'confirm',\n      name: 'gitConfirmed',\n      message: `Have you committed any important changes to your project to git, so you can rollback if necessary?\\n`,\n    },\n  ];\n\n  let { gitConfirmed } = await inquirer.prompt(gitWarning);\n\n  if (!gitConfirmed) {\n    log(\n      'Well I am glad that we asked! Commit your changes and run `exp convert` again when you are ready.'\n    );\n  }\n\n  if (!confirmed || !gitConfirmed) {\n    return;\n  }\n\n  let questions = [\n    {\n      type: 'input',\n      name: 'projectName',\n      message: 'What is your project name? eg: Instagram for Cats\\n',\n      validate(val) {\n        return val.length > 0;\n      },\n    },\n    {\n      type: 'input',\n      name: 'projectDescription',\n      message:\n        'Please provide a short description of your project (optional, used for your landing page, eg: Finally your cat can post selfies in a welcoming community of other cats, no dogs allowed)\\n',\n    },\n    {\n      type: 'input',\n      name: 'projectEntryPoint',\n      message:\n        'Which file is the main entry point to your project? (if it is the standard index.android.js / index.ios.js, just press enter)\\n',\n    },\n  ];\n\n  let answers = await inquirer.prompt(questions);\n  await Exp.convertProjectAsync(projectDir, answers, log);\n}\n\nexport default program => {\n  program\n    .command('convert [project-dir]')\n    .alias('onentize')\n    .description('Initialize Expo project files within an existing React Native project')\n    .allowNonInteractive()\n    .asyncActionProjectDir(action, true); // skip validation because the project dir isn't a valid exp dir yet\n};\n"],"sourceRoot":"/Users/ville/Projects/expo/universe/dev/exp/src"}