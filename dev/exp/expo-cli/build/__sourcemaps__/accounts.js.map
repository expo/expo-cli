{"version":3,"sources":["accounts.js"],"names":["getCurrentUserAsync","console","log","yellow","questions","type","name","message","choices","value","prompt","action","login","github","_onboardUser","green","loginOrRegisterIfLoggedOut","options","user","nonInteractive","question","username","facebook","_socialAuth","google","token","_tokenAuth","_usernamePasswordAuth","password","register","provider","loginAsync","userMetadata","onboarded","Error","push","validate","val","trim","answers","data","usernamePass","legacyMigration","kind","currentConnection","default","givenName","familyName","nickname","email","needsPasswordMigration","shouldUpdateUsernamePassword","legacy","registerAsync","registeredUser","initialize"],"mappings":"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","file":"../accounts.js","sourcesContent":["/**\n * @flow\n */\n\nimport chalk from 'chalk';\nimport inquirer from 'inquirer';\n\nimport { User as UserManager } from 'xdl';\nimport CommandError from './CommandError';\n\nimport type { LoginType, User, UserOrLegacyUser } from 'xdl/build/User';\n\n// const EXP_CLIENT_ID = 'Zso9S1J7xpRYzT4QNlanGYLL5aBrqy1l';\nUserManager.initialize();\n\ntype CommandOptions = {\n  facebook?: boolean,\n  google?: boolean,\n  github?: boolean,\n  token?: string,\n  username?: string,\n  password?: string,\n};\n\nexport async function loginOrRegisterIfLoggedOut() {\n  if (await UserManager.getCurrentUserAsync()) {\n    return;\n  }\n\n  console.log(chalk.yellow('\\nAn Expo user account is required to proceed.\\n'));\n\n  const questions = [\n    {\n      type: 'list',\n      name: 'action',\n      message: 'How would you like to authenticate?',\n      choices: [\n        {\n          name: 'Make a new Expo account',\n          value: 'register',\n        },\n        {\n          name: 'Log in with an existing Expo account',\n          value: 'existingUser',\n        },\n        {\n          name: 'Cancel',\n          value: 'cancel',\n        },\n      ],\n    },\n  ];\n\n  const { action } = await inquirer.prompt(questions);\n\n  if (action === 'github') {\n    await login({ github: true });\n  } else if (action === 'register') {\n    await _onboardUser();\n    console.log(chalk.green('Thanks!\\n'));\n  } else if (action === 'existingUser') {\n    await login({});\n  } else {\n    throw new CommandError('BAD_CHOICE', 'Not logged in.');\n  }\n}\n\nexport async function login(options: CommandOptions) {\n  const user = await UserManager.getCurrentUserAsync();\n  if (!options.nonInteractive) {\n    if (user) {\n      const question = [\n        {\n          type: 'confirm',\n          name: 'action',\n          message: `You are already logged in as ${chalk.green(\n            user.username\n          )}. Log in as new user?`,\n        },\n      ];\n\n      const { action } = await inquirer.prompt(question);\n      if (!action) {\n        // If user chooses to stay logged in, return\n        return;\n      }\n    }\n\n    if (options.facebook) {\n      // handle fb login\n      return await _socialAuth('facebook');\n    } else if (options.google) {\n      // handle google login\n      return await _socialAuth('google');\n    } else if (options.github) {\n      // handle github login\n      return await _socialAuth('github');\n    } else if (options.token) {\n      // handle token login\n      return await _tokenAuth(options.token);\n    } else {\n      // handle username/password auth\n      return await _usernamePasswordAuth(options.username, options.password);\n    }\n  } else if (options.username && options.password) {\n    return await _usernamePasswordAuth(options.username, options.password);\n  } else {\n    throw new CommandError(\n      'NON_INTERACTIVE',\n      'Username and password not provided in non-interactive mode.'\n    );\n  }\n}\n\nexport async function register(options: CommandOptions) {\n  if (options.github) {\n    // handle github login\n    await _socialAuth('github');\n    console.log('\\nThanks for signing up!');\n  } else {\n    await _onboardUser();\n    console.log('\\nThanks for signing up!');\n  }\n}\n\nasync function _socialAuth(provider: LoginType) {\n  let user = await UserManager.loginAsync(provider);\n  if (user) {\n    if (user.userMetadata.onboarded) {\n      console.log(`\\nSuccess. You are now logged in as ${chalk.green(user.username)}.`);\n      return user;\n    } else {\n      user = await _onboardUser(user);\n      console.log(`\\nSuccess. You are now logged in as ${chalk.green(user.username)}.`);\n      return user;\n    }\n  } else {\n    throw new Error('Unexpected Error: No user returned from the API');\n  }\n}\n\nasync function _tokenAuth(token: string) {\n  console.log('\\nStay tuned! This feature is not yet implemented.');\n  return;\n}\n\nasync function _usernamePasswordAuth(username?: string, password?: string): Promise<User> {\n  const questions = [];\n  if (!username) {\n    questions.push({\n      type: 'input',\n      name: 'username',\n      message: 'Username/Email Address:',\n      validate(val) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    });\n  }\n\n  if (!password) {\n    questions.push({\n      type: 'password',\n      name: 'password',\n      message: 'Password:',\n      validate(val) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    });\n  }\n\n  const answers = await inquirer.prompt(questions);\n\n  const data = {\n    username: username || answers.username,\n    password: password || answers.password,\n  };\n\n  let user = await UserManager.loginAsync('user-pass', data);\n\n  if (user) {\n    if (user.userMetadata.onboarded) {\n      console.log(`\\nSuccess. You are now logged in as ${chalk.green(user.username)}.`);\n      return user;\n    } else {\n      user = await _onboardUser(user, data);\n      console.log(`\\nSuccess. You are now logged in as ${chalk.green(user.username)}.`);\n      return user;\n    }\n  } else {\n    throw new Error('Unexpected Error: No user returned from the API');\n  }\n}\n\nasync function _onboardUser(\n  user?: UserOrLegacyUser,\n  usernamePass?: { username: string, password: string }\n): Promise<User> {\n  console.log('');\n\n  const legacyMigration =\n    (user && user.kind === 'legacyUser') ||\n    (user && user.kind === 'user' && user.currentConnection === 'Username-Password-Authentication');\n\n  if (user && legacyMigration) {\n    console.log(\n      `Signed in as: @${chalk.green(user.username)}\nHi there! We don't currently have any way to identify you if you were to lose\nyour password. Please provide us with your name and e-mail address.`\n    );\n  } else {\n    console.log(\n      `Thanks for signing up for Expo!\nJust a few questions:`\n    );\n  }\n\n  console.log('');\n\n  const questions = [];\n  questions.push(\n    {\n      type: 'input',\n      name: 'givenName',\n      message: 'First Name:',\n      default: (!legacyMigration && user && user.kind === 'user' && user.givenName) || null,\n      validate(val) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    },\n    {\n      type: 'input',\n      name: 'familyName',\n      message: 'Last Name:',\n      default: (!legacyMigration && user && user.kind === 'user' && user.familyName) || null,\n      validate(val) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    }\n  );\n\n  if (!legacyMigration) {\n    // needs a username\n    questions.push({\n      type: 'input',\n      name: 'username',\n      message: 'Username:',\n      default: (user && user.kind === 'user' && (user.username || user.nickname)) || null,\n      validate(val, answers) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    });\n  }\n\n  questions.push({\n    type: 'input',\n    name: 'email',\n    message: 'Email Address:',\n    default: (!legacyMigration && user && user.kind === 'user' && user.email) || null,\n    validate(val) {\n      if (val.trim() === '') {\n        return false;\n      }\n      return true;\n    },\n  });\n\n  if (!legacyMigration || (user && user.userMetadata.needsPasswordMigration)) {\n    questions.push({\n      type: 'password',\n      name: 'password',\n      message: 'Password:',\n      validate(val) {\n        if (val.trim() === '') {\n          return false;\n        }\n        return true;\n      },\n    });\n  }\n\n  if (!legacyMigration) {\n    questions.push({\n      type: 'password',\n      name: 'passwordRepeat',\n      message: 'Password Repeat:',\n      validate(val, answers) {\n        if (val.trim() === '') {\n          return false;\n        }\n        if (val.trim() !== answers.password.trim()) {\n          return `Passwords don't match!`;\n        }\n        return true;\n      },\n    });\n  }\n\n  const answers = await inquirer.prompt(questions);\n\n  // Don't send user data (username/password) if\n  const shouldUpdateUsernamePassword = !(user && user.kind === 'user' && user.userMetadata.legacy);\n\n  const registeredUser = await UserManager.registerAsync(\n    {\n      ...(shouldUpdateUsernamePassword && usernamePass ? usernamePass : {}),\n      ...answers,\n    },\n    user\n  );\n\n  return registeredUser;\n}\n"],"sourceRoot":"/Users/ville/Projects/expo/universe/dev/exp/src"}