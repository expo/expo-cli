{"version":3,"file":"createIndexHTMLFromAppJSONAsync.js","sourceRoot":"","sources":["../src/createIndexHTMLFromAppJSONAsync.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,8EAAoD;AACpD,2CAA8D;AAC9D,0EAAkD;AAClD,4EAAoD;AACpD,8DAAsC;AAGtC,MAAM,cAAc,GAAG;IACrB,cAAc,EAAE,IAAI;IACpB,kBAAkB,EAAE,IAAI;IACxB,yBAAyB,EAAE,IAAI;IAC/B,eAAe,EAAE,IAAI;IACrB,qBAAqB,EAAE,IAAI;IAC3B,6BAA6B,EAAE,IAAI;IACnC,gBAAgB,EAAE,IAAI;IACtB,QAAQ,EAAE,IAAI;IACd,SAAS,EAAE,IAAI;IACf,UAAU,EAAE,IAAI;CACjB,CAAC;AAEF,SAA8B,+BAA+B,CAC3D,GAAgB;;QAEhB,MAAM,SAAS,GAAG,MAAM,uBAAa,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,MAAM,GAAG,MAAM,wBAAc,CAAC,GAAG,CAAC,CAAC;QACzC,MAAM,YAAY,GAAG,iBAAO,CAAC,GAAG,CAAC,KAAK,YAAY,CAAC;QAEnD,MAAM,EAAE,IAAI,EAAE,KAAK,GAAG,EAAE,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC;QACxC;;;WAGG;QACH,MAAM,MAAM,GAAG,qCAA4B,CACzC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,EACvC,cAAc,CACf,CAAC;QAEF,6DAA6D;QAC7D,OAAO,IAAI,6BAAiB,CAAC;YAC3B,iCAAiC;YACjC,QAAQ,EAAE,SAAS,CAAC,UAAU,CAAC,SAAS;YACxC,oDAAoD;YACpD,KAAK,EAAE,IAAI;YACX,4DAA4D;YAC5D,kEAAkE;YAClE,MAAM;YACN,8CAA8C;YAC9C,QAAQ,EAAE,SAAS,CAAC,QAAQ,CAAC,SAAS;SACvC,CAAC,CAAC;IACL,CAAC;CAAA;AA7BD,kDA6BC","sourcesContent":["import HtmlWebpackPlugin from 'html-webpack-plugin';\nimport { overrideWithPropertyOrConfig } from './utils/config';\nimport getPathsAsync from './utils/getPathsAsync';\nimport getConfigAsync from './utils/getConfigAsync';\nimport getMode from './utils/getMode';\nimport { Environment } from './types';\n\nconst DEFAULT_MINIFY = {\n  removeComments: true,\n  collapseWhitespace: true,\n  removeRedundantAttributes: true,\n  useShortDoctype: true,\n  removeEmptyAttributes: true,\n  removeStyleLinkTypeAttributes: true,\n  keepClosingSlash: true,\n  minifyJS: true,\n  minifyCSS: true,\n  minifyURLs: true,\n};\n\nexport default async function createIndexHTMLFromAppJSONAsync(\n  env: Environment\n): Promise<HtmlWebpackPlugin> {\n  const locations = await getPathsAsync(env);\n  const config = await getConfigAsync(env);\n  const isProduction = getMode(env) === 'production';\n\n  const { name, build = {} } = config.web;\n  /**\n   * The user can disable minify with\n   * `web.minifyHTML = false || {}`\n   */\n  const minify = overrideWithPropertyOrConfig(\n    isProduction ? build.minifyHTML : false,\n    DEFAULT_MINIFY\n  );\n\n  // Generates an `index.html` file with the <script> injected.\n  return new HtmlWebpackPlugin({\n    // The file to write the HTML to.\n    filename: locations.production.indexHtml,\n    // The title to use for the generated HTML document.\n    title: name,\n    // Pass a html-minifier options object to minify the output.\n    // https://github.com/kangax/html-minifier#options-quick-reference\n    minify,\n    // The `webpack` require path to the template.\n    template: locations.template.indexHtml,\n  });\n}\n"]}