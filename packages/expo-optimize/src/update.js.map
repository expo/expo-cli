{"version":3,"file":"update.js","sourceRoot":"","sources":["update.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,kDAA0B;AAC1B,iDAAyC;AACzC,aAAa;AACb,gEAA0C;AAE1C,SAAS,aAAa;IACpB,IAAI;QACF,wBAAQ,CAAC,mBAAmB,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC;KACb;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,KAAK,CAAC;KACd;AACH,CAAC;AAED,SAA8B,YAAY;;QACxC,MAAM,WAAW,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAErD,MAAM,MAAM,GAAG,sBAAc,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;QAE/D,IAAI;YACF,MAAM,GAAG,GAAG,MAAM,MAAM,CAAC;YACzB,IAAI,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE;gBACrB,MAAM,MAAM,GAAG,aAAa,EAAE,CAAC;gBAE/B,MAAM,YAAY,GAAG,WAAW,EAAE,CAAC;gBACnC,OAAO,CAAC,GAAG,EAAE,CAAC;gBACd,OAAO,CAAC,GAAG,CAAC,eAAK,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,YAAY,CAAC,IAAI,iBAAiB,CAAC,CAAC,CAAC;gBACzF,OAAO,CAAC,GAAG,CACT,6BAA6B;oBAC3B,eAAK,CAAC,IAAI,CACR,MAAM,CAAC,CAAC,CAAC,mBAAmB,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,YAAY,YAAY,CAAC,IAAI,EAAE,CAClF,CACJ,CAAC;gBACF,OAAO,CAAC,GAAG,EAAE,CAAC;aACf;SACF;QAAC,WAAM;YACN,eAAe;SAChB;IACH,CAAC;CAAA;AAxBD,+BAwBC","sourcesContent":["import chalk from 'chalk';\nimport { execSync } from 'child_process';\n// @ts-ignore\nimport checkForUpdate from 'update-check';\n\nfunction shouldUseYarn() {\n  try {\n    execSync('yarnpkg --version', { stdio: 'ignore' });\n    return true;\n  } catch (_) {\n    return false;\n  }\n}\n\nexport default async function shouldUpdate() {\n  const packageJson = () => require('../package.json');\n\n  const update = checkForUpdate(packageJson()).catch(() => null);\n\n  try {\n    const res = await update;\n    if (res && res.latest) {\n      const isYarn = shouldUseYarn();\n\n      const _packageJson = packageJson();\n      console.log();\n      console.log(chalk.yellow.bold(`A new version of \\`${_packageJson.name}\\` is available`));\n      console.log(\n        'You can update by running: ' +\n          chalk.cyan(\n            isYarn ? `yarn global add ${_packageJson.name}` : `npm i -g ${_packageJson.name}`\n          )\n      );\n      console.log();\n    }\n  } catch {\n    // ignore error\n  }\n}\n"]}